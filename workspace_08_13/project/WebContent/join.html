<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>layout test App</title>
<link rel="stylesheet" href="css.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js">
</script>
	<script type="text/javascript">
	const log = console.log;
	let xdata;//필요하면 사용
	
	$(function(){
		$('#id_check').click(function(){
			idcheck();
			
			
		});
		
		
	});//돔트리 완성되면 이 함수 수행
	
	function idcheck(){
		$.ajax({
			
			url:'json/id_check.jsp',
		dataType:'json',
		data:{
			id:$('#id').val()
			
		},
		success:function(data){
			//xdata=data;
			//alert("success"+data.id);//null=undefined
			if(data.id == undefined){
				$('#msg1').html('사용가능한 아이디입니다.')
			}else{
				
				$('#msg1').html('사용중인 아이디입니다.')
			}
		},
		error:function(e){
			alert("error"+ e);
		}//,주의
		});
		
	}//ajax통신
	</script>
</head>
<body>
  
		<section>

	<form action="join.do" method="get">
	
	<table border = "1">
		<tr>
			<td> <label for ="id"> ID </label> </td>
			<td> 
			<input type="text" id = "id" name="id" value ="" /> 
			<input type="button" value="ID중복체크" id="id_check" >
			<br>
			<span id="msg1" class="error"></span>
			</td>
		</tr>		
		<tr>
			<td> <label for ="pw"> PW </label> </td>
			<td> <input type ="password" id = "pw" name="pw" value ="" /> </td>
		</tr>		
		<tr>
			<td> <label for ="name"> NAME </label> </td>
			<td> <input type ="text" id = "name" name="name" value ="" /> </td>
		</tr>		
		<tr>
			<td> <label for ="role"> ROLE </label> </td>
			<td> 
			<input type ="radio" id = "role" name="role" value ="admin" /> admin
			<input type ="radio" name="role" value ="user" /> user	
			</td>
		</tr>		
		<tr>
			<td colspan = "2">
				<input type = "submit" value = "회원가입">			
				<input type = "reset" value = "취소">		
			</td>
		</tr>		
	</table>
	
	</form>
	

 
		</section>

		
</body>
</html>